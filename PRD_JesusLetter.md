# JesusLetter 3.0 產品需求文檔 (PRD)

## 1. 產品概述

### 1.1 產品名稱
**耶穌的信 3.0** (JesusLetter 3.0)

### 1.2 產品定位
一個基於 AI 技術的屬靈陪伴應用程序，為用戶提供個人化的屬靈指導、代禱服務和心靈對話。透過模擬耶穌的回信方式，幫助用戶在信仰中成長，解決生活困擾，建立穩定的禱告習慣。

### 1.3 產品願景
成為全球華語基督徒社群最受信賴的 AI 屬靈陪伴平台，讓每個人都能隨時隨地與耶穌進行心靈對話，獲得屬靈指導和安慰。

### 1.4 目標用戶
- **主要用戶**：華語基督徒、天主教徒
- **次要用戶**：對基督教信仰感興趣的探索者
- **潛在用戶**：尋求心靈慰藉和人生指導的一般用戶

## 2. 市場分析

### 2.1 市場需求
- 現代人面臨工作壓力、感情困擾、健康問題等多重挑戰
- 傳統宗教服務在時間和地點上存在限制
- 年輕一代更習慣透過數位化方式尋求幫助
- AI 技術的成熟為個人化屬靈服務提供了可能

### 2.2 競爭分析
- **直接競爭者**：其他基督教 AI 應用、線上禱告平台
- **間接競爭者**：心理諮詢 APP、冥想應用、占卜算命應用
- **競爭優勢**：
  - 基於聖經教導的回應
  - 多 AI 服務整合（Gemini + OpenAI）
  - 個人化代禱服務
  - 完整的歷史記錄管理

## 3. 產品功能

### 3.1 核心功能

#### 3.1.1 AI 屬靈對話
- **功能描述**：用戶可以向耶穌提出任何困擾、感恩或疑問
- **輸入內容**：
  - 暱稱（必填）
  - 宗教信仰（選填）
  - 主題選擇（工作、感情、健康、家庭、財富、信仰、其他）
  - 具體情況描述（必填，最多2000字）
- **輸出內容**：
  - 耶穌的回信（個人化回應）
  - 相關聖經經文
  - 個人化代禱文
  - 實用建議和行動指南

#### 3.1.2 智能代禱服務
- **功能描述**：基於用戶選擇的主題，自動推斷隱藏需求並提供代禱
- **特色功能**：
  - 主題映射：每個主題對應特定的隱藏需求
  - 智能推斷：即使用戶未提供詳細信息，也能推斷潛在困擾
  - 個人化代禱：根據用戶情況生成專屬代禱文

#### 3.1.3 歷史記錄管理
- **功能描述**：保存和管理用戶的所有屬靈對話記錄
- **主要功能**：
  - 按時間排序的對話列表
  - 搜索和篩選功能
  - 詳細內容查看
  - 導出功能（PDF、Word）

### 3.2 輔助功能

#### 3.2.1 用戶界面
- **歡迎頁面**：產品介紹和功能說明
- **主頁**：快速操作、統計信息、最近對話、每日經文
- **深色/淺色主題切換**
- **響應式設計**：支持手機、平板、桌面

#### 3.2.2 數據統計
- 總信件數統計
- 使用天數統計
- 本月信件數統計
- 使用習慣分析

#### 3.2.3 內容分享
- 信件內容分享到社交媒體
- 生成精美的分享圖片
- 隱私保護選項

## 4. 技術架構

### 4.1 前端技術棧
- **框架**：Vue.js 3.5.12
- **構建工具**：Vite 5.4.10
- **樣式**：CSS3 + 響應式設計
- **PWA**：Service Worker 支持離線功能
- **移動端**：Capacitor 6.0 支持 iOS/Android

### 4.2 後端技術棧
- **運行環境**：Node.js 18+
- **Web 框架**：Express.js 4.21.2
- **AI 服務**：
  - Google Gemini API 0.21.0
  - OpenAI API 4.67.3
- **安全中間件**：
  - Helmet.js（安全頭設置）
  - CORS（跨域資源共享）
  - Express Rate Limit（速率限制）

### 4.3 部署架構
- **容器化**：Docker + Docker Compose
- **反向代理**：Nginx
- **環境管理**：dotenv
- **日誌記錄**：Morgan
- **健康檢查**：內建健康檢查端點

## 5. 用戶體驗設計

### 5.1 用戶流程
1. **首次使用**：歡迎頁面 → 功能介紹 → 開始使用
2. **日常使用**：主頁 → 新煩惱 → 填寫表單 → 獲得回信 → 查看歷史
3. **回顧使用**：主頁 → 歷史記錄 → 查看詳情 → 分享內容

### 5.2 界面設計原則
- **簡潔性**：清晰的視覺層次，避免信息過載
- **親和性**：溫暖的色彩搭配，符合宗教氛圍
- **易用性**：直觀的操作流程，降低學習成本
- **響應性**：適配各種設備尺寸

### 5.3 交互設計
- **即時反饋**：載入狀態、成功提示、錯誤處理
- **漸進式披露**：分步驟展示複雜功能
- **手勢支持**：滑動、點擊等移動端手勢

## 6. 數據模型

### 6.1 用戶數據
```javascript
{
  nickname: String,        // 暱稱
  religion: String,        // 宗教信仰
  createdAt: Date,        // 創建時間
  lastActiveAt: Date      // 最後活躍時間
}
```

### 6.2 信件數據
```javascript
{
  id: String,             // 唯一標識
  nickname: String,       // 用戶暱稱
  religion: String,       // 宗教信仰
  topics: Array,          // 主題標籤
  situation: String,      // 具體情況
  jesusLetter: String,    // 耶穌回信
  bibleVerse: String,     // 聖經經文
  prayer: String,         // 代禱文
  advice: String,         // 實用建議
  createdAt: Date,        // 創建時間
  aiService: String       // 使用的AI服務
}
```

## 7. API 設計

### 7.1 核心 API 端點

#### 7.1.1 健康檢查
```
GET /api/health
Response: {
  status: "healthy",
  timestamp: "2024-01-01T00:00:00.000Z",
  services: {
    gemini: "available",
    openai: "available"
  }
}
```

#### 7.1.2 AI 生成
```
POST /api/ai/generate
Request: {
  nickname: "小明",
  religion: "基督徒",
  topics: ["工作", "感情"],
  situation: "最近工作壓力很大..."
}
Response: {
  success: true,
  data: {
    jesusLetter: "親愛的小明...",
    bibleVerse: "腓立比書4:13...",
    prayer: "親愛的天父...",
    advice: "建議你..."
  }
}
```

#### 7.1.3 AI 服務狀態
```
GET /api/ai/status
Response: {
  gemini: {
    available: true,
    model: "gemini-pro"
  },
  openai: {
    available: true,
    model: "gpt-3.5-turbo"
  }
}
```

### 7.2 安全措施
- **速率限制**：
  - 一般 API：15分鐘內最多100次請求
  - AI API：1分鐘內最多3次請求（生產環境）
- **輸入驗證**：所有用戶輸入都經過驗證和清理
- **CORS 配置**：僅允許授權域名訪問
- **安全頭**：使用 Helmet.js 設置安全 HTTP 頭

## 8. 性能要求

### 8.1 響應時間
- **頁面載入**：< 2秒
- **AI 回應生成**：< 30秒
- **歷史記錄查詢**：< 1秒

### 8.2 併發處理
- **同時在線用戶**：支持1000+用戶
- **AI 請求處理**：支持100+併發請求
- **數據庫查詢**：支持10000+併發查詢

### 8.3 可用性
- **系統可用性**：99.9%
- **錯誤率**：< 0.1%
- **恢復時間**：< 5分鐘

## 9. 安全與隱私

### 9.1 數據安全
- **傳輸加密**：HTTPS/TLS 1.3
- **數據存儲**：本地存儲，不上傳到服務器
- **API 密鑰管理**：環境變量安全存儲
- **輸入過濾**：防止 XSS 和注入攻擊

### 9.2 隱私保護
- **數據最小化**：僅收集必要的用戶信息
- **匿名化處理**：用戶數據不包含個人身份信息
- **用戶控制**：用戶可以刪除自己的數據
- **透明度**：清晰的隱私政策說明

## 10. 部署與運維

### 10.1 部署環境
- **開發環境**：本地開發服務器
- **測試環境**：Docker 容器
- **生產環境**：雲端服務器 + CDN

### 10.2 監控與日誌
- **應用監控**：健康檢查端點
- **性能監控**：響應時間、錯誤率統計
- **日誌記錄**：請求日誌、錯誤日誌
- **告警機制**：異常情況自動通知

### 10.3 備份與恢復
- **代碼備份**：Git 版本控制
- **配置備份**：環境變量和配置文件
- **數據備份**：定期備份用戶數據
- **災難恢復**：快速恢復服務的預案

## 11. 發展規劃

### 11.1 短期目標（1-3個月）
- 完善現有功能的穩定性
- 優化 AI 回應質量
- 增加更多聖經經文數據庫
- 改進用戶界面體驗

### 11.2 中期目標（3-6個月）
- 增加多語言支持（英文、繁體中文）
- 開發移動端 APP（iOS/Android）
- 增加社群功能（分享、討論）
- 集成更多 AI 模型

### 11.3 長期目標（6-12個月）
- 建立用戶社群平台
- 開發牧師/輔導員版本
- 增加音頻/視頻功能
- 拓展到其他宗教領域

## 12. 風險評估

### 12.1 技術風險
- **AI 服務中斷**：備用 AI 服務和降級方案
- **API 配額限制**：多服務負載均衡
- **性能瓶頸**：緩存和優化策略

### 12.2 業務風險
- **宗教敏感性**：嚴格的內容審核機制
- **用戶接受度**：持續的用戶反饋收集
- **競爭壓力**：差異化功能開發

### 12.3 合規風險
- **數據保護法規**：GDPR、個資法合規
- **宗教內容規範**：符合各地宗教政策
- **AI 倫理**：負責任的 AI 使用

## 13. 成功指標

### 13.1 用戶指標
- **日活躍用戶數**：目標1000+
- **月活躍用戶數**：目標5000+
- **用戶留存率**：7日留存率 > 30%
- **用戶滿意度**：評分 > 4.5/5.0

### 13.2 業務指標
- **信件生成數**：每日1000+封
- **功能使用率**：各功能使用率 > 60%
- **錯誤率**：< 1%
- **響應時間**：平均 < 15秒

### 13.3 技術指標
- **系統可用性**：> 99.5%
- **API 成功率**：> 99%
- **頁面載入速度**：< 3秒
- **移動端適配率**：> 95%

---

**文檔版本**：1.0  
**創建日期**：2024年1月  
**最後更新**：2024年1月  
**負責團隊**：Jesus Letters Team