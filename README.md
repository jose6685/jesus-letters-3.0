# è€¶ç©Œçš„ä¿¡ (Jesus Letter)

ä¸€å€‹åŸºæ–¼ Vue.js å’Œ Node.js çš„ AI é©…å‹•çš„åŸºç£æ•™ä¿¡ä»°æ‡‰ç”¨ï¼Œè®“ç”¨æˆ¶å¯ä»¥å‘è€¶ç©Œå‚¾è¨´å¿ƒè²ä¸¦ç²å¾—å……æ»¿æ„›èˆ‡æ™ºæ…§çš„å›æ‡‰ã€‚

## åŠŸèƒ½ç‰¹è‰²

- ğŸ™ **AI ä¿¡ä»¶ç”Ÿæˆ**: åŸºæ–¼ç”¨æˆ¶è¼¸å…¥ç”Ÿæˆå€‹äººåŒ–çš„è€¶ç©Œå›ä¿¡
- ğŸ“– **å¼•å°ç¦±å‘Š**: æä¾›ç›¸æ‡‰çš„ç¦±å‘Šæ–‡æœ¬å¹«åŠ©ç”¨æˆ¶éˆä¿®
- ğŸ“š **è–ç¶“ç¶“æ–‡**: è‡ªå‹•åŒ¹é…ç›¸é—œçš„è–ç¶“ç¶“æ–‡
- ğŸ’¾ **æœ¬åœ°å­˜å„²**: å®‰å…¨åœ°ä¿å­˜å°è©±è¨˜éŒ„åœ¨æœ¬åœ°
- ğŸµ **èªéŸ³æ’­æ”¾**: æ”¯æŒæ–‡å­—è½‰èªéŸ³åŠŸèƒ½
- ğŸ“± **PWA æ”¯æŒ**: å¯å®‰è£ç‚ºæ‰‹æ©Ÿæ‡‰ç”¨
- ğŸŒ™ **æ·±è‰²æ¨¡å¼**: æ”¯æŒæ˜æš—ä¸»é¡Œåˆ‡æ›
- ğŸ“¤ **åŒ¯å‡ºåŠŸèƒ½**: æ”¯æŒ PDFã€Wordã€åœ–ç‰‡ç­‰æ ¼å¼åŒ¯å‡º

## æŠ€è¡“æ¶æ§‹

### å‰ç«¯
- **Vue 3** - ç¾ä»£åŒ–çš„å‰ç«¯æ¡†æ¶
- **Vite** - å¿«é€Ÿçš„æ§‹å»ºå·¥å…·
- **PWA** - æ¼¸é€²å¼ç¶²é æ‡‰ç”¨æ”¯æŒ
- **Speech API** - èªéŸ³åˆæˆåŠŸèƒ½
- **Canvas API** - åœ–ç‰‡ç”ŸæˆåŠŸèƒ½

### å¾Œç«¯
- **Node.js** - æœå‹™å™¨é‹è¡Œç’°å¢ƒ
- **Express.js** - Web æ‡‰ç”¨æ¡†æ¶
- **OpenAI API** - AI æ–‡æœ¬ç”Ÿæˆ
- **Rate Limiting** - è«‹æ±‚é »ç‡é™åˆ¶
- **CORS** - è·¨åŸŸè³‡æºå…±äº«

## æœ¬åœ°é–‹ç™¼ç’°å¢ƒè¨­ç½®

### å‰ç½®è¦æ±‚

- Node.js 16.0 æˆ–æ›´é«˜ç‰ˆæœ¬
- npm æˆ– yarn åŒ…ç®¡ç†å™¨
- OpenAI API å¯†é‘°

### å®‰è£æ­¥é©Ÿ

1. **å…‹éš†é …ç›®**
   ```bash
   git clone <repository-url>
   cd JesusLtter
   ```

2. **å®‰è£å‰ç«¯ä¾è³´**
   ```bash
   npm install
   ```

3. **å®‰è£å¾Œç«¯ä¾è³´**
   ```bash
   cd server
   npm install
   ```

4. **é…ç½®ç’°å¢ƒè®Šé‡**
   
   åœ¨ `server` ç›®éŒ„ä¸‹å‰µå»º `.env` æ–‡ä»¶ï¼š
   ```env
   OPENAI_API_KEY=your_openai_api_key_here
   PORT=3001
   NODE_ENV=development
   ```

### æœ¬åœ°å•Ÿå‹•

1. **å•Ÿå‹•å¾Œç«¯æœå‹™å™¨**
   ```bash
   cd server
   npm start
   ```
   å¾Œç«¯æœå‹™å°‡åœ¨ `http://localhost:3001` é‹è¡Œ

2. **å•Ÿå‹•å‰ç«¯é–‹ç™¼æœå‹™å™¨**
   ```bash
   # åœ¨é …ç›®æ ¹ç›®éŒ„
   npm run dev
   ```
   å‰ç«¯æ‡‰ç”¨å°‡åœ¨ `http://localhost:5173` é‹è¡Œ

3. **è¨ªå•æ‡‰ç”¨**
   
   æ‰“é–‹ç€è¦½å™¨è¨ªå• `http://localhost:5173`

## ç”Ÿç”¢ç’°å¢ƒéƒ¨ç½²

### Vercel éƒ¨ç½² (æ¨è–¦)

#### å‰ç«¯éƒ¨ç½²

1. **æº–å‚™éƒ¨ç½²**
   ```bash
   npm run build
   ```

2. **Vercel CLI éƒ¨ç½²**
   ```bash
   # å®‰è£ Vercel CLI
   npm i -g vercel
   
   # ç™»éŒ„ Vercel
   vercel login
   
   # éƒ¨ç½²
   vercel --prod
   ```

3. **GitHub è‡ªå‹•éƒ¨ç½²**
   - å°‡ä»£ç¢¼æ¨é€åˆ° GitHub
   - åœ¨ Vercel æ§åˆ¶å°é€£æ¥ GitHub å€‰åº«
   - é…ç½®è‡ªå‹•éƒ¨ç½²

#### å¾Œç«¯éƒ¨ç½²

1. **å‰µå»º `vercel.json` é…ç½®**
   ```json
   {
     "version": 2,
     "builds": [
       {
         "src": "server/app.js",
         "use": "@vercel/node"
       }
     ],
     "routes": [
       {
         "src": "/api/(.*)",
         "dest": "server/app.js"
       }
     ],
     "env": {
       "OPENAI_API_KEY": "@openai-api-key"
     }
   }
   ```

2. **è¨­ç½®ç’°å¢ƒè®Šé‡**
   ```bash
   vercel env add OPENAI_API_KEY
   ```

3. **éƒ¨ç½²å¾Œç«¯**
   ```bash
   cd server
   vercel --prod
   ```

### å…¶ä»–éƒ¨ç½²é¸é …

#### Netlify éƒ¨ç½²

1. **æ§‹å»ºå‰ç«¯**
   ```bash
   npm run build
   ```

2. **éƒ¨ç½²åˆ° Netlify**
   - å°‡ `dist` ç›®éŒ„ä¸Šå‚³åˆ° Netlify
   - æˆ–é€£æ¥ GitHub å€‰åº«è‡ªå‹•éƒ¨ç½²

#### å‚³çµ±æœå‹™å™¨éƒ¨ç½²

1. **æ§‹å»ºæ‡‰ç”¨**
   ```bash
   npm run build
   ```

2. **é…ç½® Nginx**
   ```nginx
   server {
       listen 80;
       server_name your-domain.com;
       
       location / {
           root /path/to/dist;
           try_files $uri $uri/ /index.html;
       }
       
       location /api {
           proxy_pass http://localhost:3001;
           proxy_set_header Host $host;
           proxy_set_header X-Real-IP $remote_addr;
       }
   }
   ```

3. **ä½¿ç”¨ PM2 ç®¡ç†å¾Œç«¯é€²ç¨‹**
   ```bash
   npm install -g pm2
   cd server
   pm2 start app.js --name "jesus-letter-api"
   ```

## ç’°å¢ƒè®Šé‡é…ç½®

### å¾Œç«¯ç’°å¢ƒè®Šé‡

| è®Šé‡å | æè¿° | é»˜èªå€¼ | å¿…éœ€ |
|--------|------|--------|------|
| `OPENAI_API_KEY` | OpenAI API å¯†é‘° | - | âœ… |
| `PORT` | æœå‹™å™¨ç«¯å£ | 3001 | âŒ |
| `NODE_ENV` | é‹è¡Œç’°å¢ƒ | development | âŒ |
| `CORS_ORIGIN` | å…è¨±çš„è·¨åŸŸä¾†æº | * | âŒ |
| `RATE_LIMIT_WINDOW` | é€Ÿç‡é™åˆ¶æ™‚é–“çª—å£(åˆ†é˜) | 15 | âŒ |
| `RATE_LIMIT_MAX` | é€Ÿç‡é™åˆ¶æœ€å¤§è«‹æ±‚æ•¸ | 100 | âŒ |

### å‰ç«¯ç’°å¢ƒè®Šé‡

| è®Šé‡å | æè¿° | é»˜èªå€¼ | å¿…éœ€ |
|--------|------|--------|------|
| `VITE_API_BASE_URL` | å¾Œç«¯ API åŸºç¤ URL | http://localhost:3001 | âŒ |

## é …ç›®çµæ§‹

```
JesusLtter/
â”œâ”€â”€ public/                 # éœæ…‹è³‡æº
â”‚   â”œâ”€â”€ icons/             # PWA åœ–æ¨™
â”‚   â””â”€â”€ manifest.json      # PWA é…ç½®
â”œâ”€â”€ src/                   # å‰ç«¯æºç¢¼
â”‚   â”œâ”€â”€ components/        # Vue çµ„ä»¶
â”‚   â”œâ”€â”€ services/          # æœå‹™å±¤
â”‚   â”œâ”€â”€ styles/           # æ¨£å¼æ–‡ä»¶
â”‚   â””â”€â”€ main.js           # å…¥å£æ–‡ä»¶
â”œâ”€â”€ server/               # å¾Œç«¯æºç¢¼
â”‚   â”œâ”€â”€ routes/           # è·¯ç”±è™•ç†
â”‚   â”œâ”€â”€ middleware/       # ä¸­é–“ä»¶
â”‚   â””â”€â”€ app.js           # æœå‹™å™¨å…¥å£
â”œâ”€â”€ dist/                # æ§‹å»ºè¼¸å‡º
â””â”€â”€ package.json         # é …ç›®é…ç½®
```

## API æ–‡æª”

### ç”Ÿæˆä¿¡ä»¶

**POST** `/api/generate`

**è«‹æ±‚é«”:**
```json
{
  "userInput": "ç”¨æˆ¶çš„ç¦±å‘Šæˆ–å¿ƒè²"
}
```

**éŸ¿æ‡‰:**
```json
{
  "aiResponse": {
    "jesusLetter": "è€¶ç©Œçš„å›ä¿¡å…§å®¹",
    "guidedPrayer": "å¼•å°ç¦±å‘Šå…§å®¹",
    "biblicalReferences": ["ç›¸é—œè–ç¶“ç¶“æ–‡"]
  }
}
```

### å¥åº·æª¢æŸ¥

**GET** `/api/health`

**éŸ¿æ‡‰:**
```json
{
  "status": "healthy",
  "timestamp": "2024-01-01T00:00:00.000Z"
}
```

## é–‹ç™¼æŒ‡å—

### ä»£ç¢¼è¦ç¯„

- ä½¿ç”¨ ESLint é€²è¡Œä»£ç¢¼æª¢æŸ¥
- éµå¾ª Vue.js å®˜æ–¹é¢¨æ ¼æŒ‡å—
- ä½¿ç”¨ Prettier é€²è¡Œä»£ç¢¼æ ¼å¼åŒ–

### æäº¤è¦ç¯„

ä½¿ç”¨ Conventional Commits æ ¼å¼ï¼š
```
feat: æ–°åŠŸèƒ½
fix: ä¿®å¾©å•é¡Œ
docs: æ–‡æª”æ›´æ–°
style: ä»£ç¢¼æ ¼å¼èª¿æ•´
refactor: ä»£ç¢¼é‡æ§‹
test: æ¸¬è©¦ç›¸é—œ
chore: æ§‹å»ºæˆ–è¼”åŠ©å·¥å…·è®Šå‹•
```

### æ¸¬è©¦

```bash
# é‹è¡Œå‰ç«¯æ¸¬è©¦
npm run test

# é‹è¡Œå¾Œç«¯æ¸¬è©¦
cd server
npm test
```

## æ•…éšœæ’é™¤

### å¸¸è¦‹å•é¡Œ

1. **API è«‹æ±‚å¤±æ•—**
   - æª¢æŸ¥ OpenAI API å¯†é‘°æ˜¯å¦æ­£ç¢º
   - ç¢ºèªå¾Œç«¯æœå‹™æ˜¯å¦æ­£å¸¸é‹è¡Œ
   - æª¢æŸ¥ç¶²çµ¡é€£æ¥

2. **PWA å®‰è£å•é¡Œ**
   - ç¢ºä¿ä½¿ç”¨ HTTPS å”è­°
   - æª¢æŸ¥ manifest.json é…ç½®
   - æ¸…é™¤ç€è¦½å™¨ç·©å­˜

3. **èªéŸ³æ’­æ”¾ä¸å·¥ä½œ**
   - æª¢æŸ¥ç€è¦½å™¨æ˜¯å¦æ”¯æŒ Speech API
   - ç¢ºèªç”¨æˆ¶å·²æˆæ¬ŠéŸ³é »æ’­æ”¾
   - å˜—è©¦ä¸åŒçš„ç€è¦½å™¨

### æ—¥èªŒæŸ¥çœ‹

```bash
# æŸ¥çœ‹å¾Œç«¯æ—¥èªŒ
cd server
npm run logs

# æŸ¥çœ‹ PM2 æ—¥èªŒ
pm2 logs jesus-letter-api
```

## è²¢ç»æŒ‡å—

1. Fork é …ç›®
2. å‰µå»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å‰µå»º Pull Request

## è¨±å¯è­‰

æœ¬é …ç›®æ¡ç”¨ MIT è¨±å¯è­‰ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è©³æƒ…ã€‚

## è¯ç¹«æ–¹å¼

å¦‚æœ‰å•é¡Œæˆ–å»ºè­°ï¼Œè«‹é€šéä»¥ä¸‹æ–¹å¼è¯ç¹«ï¼š

- å‰µå»º GitHub Issue
- ç™¼é€éƒµä»¶è‡³ [your-email@example.com]

## è‡´è¬

- OpenAI æä¾›çš„ GPT API
- Vue.js ç¤¾å€çš„å„ªç§€å·¥å…·å’Œè³‡æº
- æ‰€æœ‰è²¢ç»è€…çš„æ”¯æŒå’Œå¹«åŠ©

---

é¡˜ç¥ç¥ç¦é€™å€‹é …ç›®ï¼Œè®“æ›´å¤šäººèƒ½å¤ æ„Ÿå—åˆ°ä¸»çš„æ„›èˆ‡æ©å…¸ã€‚ğŸ™